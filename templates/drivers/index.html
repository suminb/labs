{% extends 'base.html' %}
{% block title %} Labs :: Slow Drivers {% endblock %}
{% block metatags %}
    <meta property="og:title" content="Labs :: Slow Drivers"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="http://labs.suminb.com/drivers"/>
    <meta property="og:image" content="http://labs.suminb.com/static/images/question_mark_128.png"/>
    <meta property="og:site_name" content="labs.suminb.com"/>
    <meta property="fb:admins" content="10132775"/>
    <meta property="og:description" content="We try very hard to avoid slow drivers."/>
{% endblock %}
{% block javascript %}
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
    <script type="text/javascript" src="/static/jquery.printf.js"></script>
    <script type="text/javascript" src="/static/jquery.base64.js"></script>
    <script type="text/javascript" src="/static/js/highcharts.js"></script>
    <script type="text/javascript" src="/static/drivers/data.js"></script>
    <script type="text/javascript">
    window.onload = function() {
 
    };
    </script>
    <script type="text/javascript">

			var chartSlowByYear;
			$(document).ready(function() {
				chartSlowByYear = new Highcharts.Chart({
					chart: {
						renderTo: 'chart-slow-by-year',
						defaultSeriesType: 'column'
					},
					title: {
						text: 'Probabilistic distribution of slow drivers by vehicle year'
					},
					subtitle: {
						text: 'Source: WorldClimate.com'
					},
					xAxis: {
						categories: byYear.map(function(x) {return x[0]})
					},
					yAxis: {
						min: 0,
						title: {
							text: 'Rainfall (mm)'
						}
					},
					legend: {
						layout: 'vertical',
						backgroundColor: '#FFFFFF',
						align: 'left',
						verticalAlign: 'top',
						x: 100,
						y: 70,
						floating: true,
						shadow: true
					},
					tooltip: {
						formatter: function() {
							return ''+
								this.x +': '+ this.y +' mm';
						}
					},
					plotOptions: {
						column: {
							pointPadding: 0.2,
							borderWidth: 0
						}
					},
				        series: [{
						name: 'Year',
						data: byYear.map(function(x) {return x[1]})
				
					}]
				});
				
				
			});

			var chart;
			$(document).ready(function() {
				chart = new Highcharts.Chart({
					chart: {
						renderTo: 'chart-slow-by-make',
						plotBackgroundColor: null,
						plotBorderWidth: null,
						plotShadow: false
					},
					title: {
						text: 'Slow drivers by vehicle manufacturer'
					},
					tooltip: {
						formatter: function() {
							return $.sprintf('<b>%s</b> %.1f %%', this.point.name, this.percentage);
						}
					},
					plotOptions: {
						pie: {
							allowPointSelect: true,
							cursor: 'pointer',
							dataLabels: {
								enabled: true,
								color: '#000000',
								connectorColor: '#000000',
								formatter: function() {
									return $.sprintf('<b>%s</b>', this.point.name);
								}
							}
						}
					},
				    series: [{
						type: 'pie',
						name: 'Browser share',
						data: byMake
					}]
				});
			});
            
			var chart2;
			$(document).ready(function() {
				chart2 = new Highcharts.Chart({
					chart: {
						renderTo: 'chart-slow-by-body-type',
						plotBackgroundColor: null,
						plotBorderWidth: null,
						plotShadow: false
					},
					title: {
						text: 'Slow drivers by body type'
					},
					tooltip: {
						formatter: function() {
							return $.sprintf('<b>%s</b> %.1f %%', this.point.name, this.percentage);
						}
					},
					plotOptions: {
						pie: {
							allowPointSelect: true,
							cursor: 'pointer',
							dataLabels: {
								enabled: true,
								color: '#000000',
								connectorColor: '#000000',
								formatter: function() {
									return $.sprintf('<b>%s</b>', this.point.name);
								}
							}
						}
					},
				    series: [{
						type: 'pie',
						name: '',
						data: byBodyType
					}]
				});
			});

			var chart3;
			$(document).ready(function() {
				chart3 = new Highcharts.Chart({
					chart: {
						renderTo: 'chart-slow-by-color',
						plotBackgroundColor: null,
						plotBorderWidth: null,
						plotShadow: false
					},
					title: {
						text: 'Slow drivers by vehicle color'
					},
					tooltip: {
						formatter: function() {
							return $.sprintf('<b>%s</b> %.1f %%', this.point.name, this.percentage);
						}
					},
					plotOptions: {
						pie: {
							allowPointSelect: true,
							cursor: 'pointer',
							dataLabels: {
								enabled: true,
								color: '#000000',
								connectorColor: '#000000',
								formatter: function() {
									return $.sprintf('<b>%s</b>', this.point.name);
								}
							}
						}
					},
				    series: [{
						type: 'pie',
						name: '',
						data: byColor
					}]
				});
			});
    </script>    
    
{% endblock %}

{% block content %}
    <h1>Slow Drivers</h1>
    <p>
        We really don't like to be stuck behind slow drivers. Especially when we're late
        for work or class. Or when we are rushing for food. Sometimes slow drivers make
        us genuinely upset. So, we decided to gather some data on the road as we drive
        around the town, to see who's the slowest driver. We hope to be able to avoid
        potential slow drivers by glancing at preceding vehicles' year, make, model,
        body type, color and so on and so forth.
    </p>
    <p>
        Doesn't look so useful? Don't worry. We gather data on a regular basis
        at our best effort. We will put more graphs when we have more spare time
        in the near future. Also, we are working to develop an intelligent
        algorithm to extract more useful information from the raw data. Lastly,
        we would like to express our sincere appreciation to Hailey Park for
        allowing us to gather even more data.
    </p>
    <div>
        <div id="chart-slow-by-year"></div>
        <div id="chart-slow-by-make"></div>
        <div id="chart-slow-by-body-type"></div>
        <div id="chart-slow-by-color"></div>
    </div>
    <div>Data was updated on {{ data_last_updated }} UTC</div>
{% endblock %}